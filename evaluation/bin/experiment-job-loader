#!/bin/bash

BINDIR=`dirname $0`

##COMMAND='/bin/bash /proj/fluke/users/ypetinot/ocelot-working-copy/svn-research/trunk/evaluation/bin//../..//evaluation//bin//experiment-run-summarizer-job --log /proj/fluke/users/ypetinot/experiments/experiment-2015-07-17/instances.input/ /proj/fluke/users/ypetinot/experiments/experiment-2015-07-17/generation.temp/ 2 13\ adaptation-oracle-retrieval:::graph4-adaptation-extractive-hungarian graph-summarizer-4/bin/run-summarizer --system-configuration={"roles":{"WordGraph::Decoder::ExactDecoder":{"edge_model":"WordGraph::EdgeModel::LinearModel","reference_construction_limit":1}},"reference_collector_params":{"index_query_field":"description"},"reference_ranker_class":"WordGraph::ReferenceRanker::SymmetricTargetSimilarity","target_adapter_params":{"model_base":"/proj/nlp/users/ypetinot/models/extractive-2015-05-09","decoding_mode":"hungarian","do_replacements_only":1,"probability_threshold_substitution":0.5},"target_adapter_class":"TargetAdapter::LocalMapping::SimpleTargetAdapter","reference_collector_class":"WordGraph::ReferenceCollector::SignatureIndexCollector","reference_ranker_params":{"component_rankers_configuration":[["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"content"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"title"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"url"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"anchortext"}]],"similarity_field":"summary","use_lcs_similarity":1}}'

#instance_file=/proj/fluke/users/ypetinot/experiments/experiment-2015-07-30-homogeneous-no-compression/instances.input/393
#system=adaptation-oracle-category:::graph4-adaptation-extractive-hungarian-reranked-oracle
#configuration='{"target_adapter_post_ranking_oracle":"WordGraph::ReferenceRanker::SymmetricTargetSimilarity","roles":{"WordGraph::Decoder::ExactDecoder":{"edge_model":"WordGraph::EdgeModel::LinearModel","reference_construction_limit":1}},"reference_ranker_class":"WordGraph::ReferenceRanker::SymmetricTargetSimilarity","target_adapter_params":{"model_base":"/proj/nlp/users/ypetinot/models/extractive-2015-05-09","decoding_mode":"hungarian","probability_threshold_substitution":0.5,"do_compression":1},"reference_collector_class":"WordGraph::ReferenceCollector::CategoryOracleCollector","reference_ranker_params":{"component_rankers_configuration":[["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"content"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"title"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"url"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"anchortext"}]],"similarity_field":"summary","use_lcs_similarity":1,"max_count":20},"target_adapter_post_ranking":1,"reference_collector_params":{"index_query_field":"description"},"target_adapter_class":"TargetAdapter::LocalMapping::SimpleTargetAdapter"}'

instance_file=/proj/fluke/users/ypetinot/experiments/experiment-2015-07-30-homogeneous-compression/instances.input/384
system=adaptation-oracle-category:::graph4-adaptation-extractive-hungarian-reranked-oracle
configuration='{"target_adapter_post_ranking_oracle":"WordGraph::ReferenceRanker::SymmetricTargetSimilarity","roles":{"WordGraph::Decoder::ExactDecoder":{"edge_model":"WordGraph::EdgeModel::LinearModel","reference_construction_limit":1}},"reference_ranker_class":"WordGraph::ReferenceRanker::SymmetricTargetSimilarity","target_adapter_params":{"model_base":"/proj/nlp/users/ypetinot/models/extractive-2015-05-09","decoding_mode":"hungarian","probability_threshold_substitution":0.5,"do_compression":1},"reference_collector_class":"WordGraph::ReferenceCollector::CategoryOracleCollector","reference_ranker_params":{"component_rankers_configuration":[["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"content"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"title"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"url"}],["WordGraph::ReferenceRanker::ReferenceTargetJointProbability",{"similarity_field":"anchortext"}]],"similarity_field":"summary","use_lcs_similarity":1,"max_count":20},"target_adapter_post_ranking":1,"reference_collector_params":{"index_query_field":"description"},"target_adapter_class":"TargetAdapter::LocalMapping::SimpleTargetAdapter"}'

${BINDIR}/../../bin/run-summarizer-wrapper ${system} ${instance_file} ${configuration}
