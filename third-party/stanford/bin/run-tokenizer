#!/bin/bash 

BINDIR=`dirname $0`
source ${BINDIR}/../../../dist.rc
source ${THIRD_PARTY_RESOURCES_STANFORD}

INPUT_FILE=$1

if [ -z "$THIRD_PARTY_RESOURCES_STANFORD_JAVA_CLASSPATH}" ]; then
    exit 1;
fi

if [[ -z "${INPUT_FILE}" ]]; then
    INPUT_FILE="-"
fi

cat ${INPUT_FILE} | ${BINDIR_DIST}/custom-java -mx500m -cp ${THIRD_PARTY_RESOURCES_STANFORD_JAVA_CLASSPATH} edu.stanford.nlp.parser.lexparser.LexicalizedParser -retainTMPSubcategories -sentences "newline" -outputFormat "wordsAndTags" edu/stanford/nlp/models/lexparser/englishPCFG.ser.gz - 2>/dev/null | stdbuf -o0 grep -v '^$'
